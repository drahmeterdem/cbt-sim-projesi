<!DOCTYPE html>
<html lang="tr"><head>
<meta charset="utf--8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect"/>
<link as="style" href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Spline+Sans%3Awght%40400%3B500%3B700" onload="this.rel='stylesheet'" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<title>AI Terapi Simülasyonu</title>
<link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<style type="text/tailwindcss">
        :root {
            --primary-color: #6366F1;
            --secondary-color: #EC4899;
            --background-start: #F5F7FA;
            --background-end: #E0E7FF;
            --teacher-color: #f59e0b;
        }
        .page { @apply w-full h-full flex flex-col items-center p-4 sm:p-6 transition-opacity duration-300; }
        .page.hidden { @apply !hidden; }
        .nav-link.active { @apply bg-indigo-100 text-indigo-700; }
        .nav-link-teacher.active { @apply bg-amber-100 text-amber-700; }
        .problem-button { @apply w-full text-left bg-white/80 backdrop-blur-sm border border-gray-200 text-gray-700 rounded-xl p-5 hover:bg-[var(--primary-color)] hover:text-white hover:scale-[1.03] transform transition-all duration-300 ease-in-out shadow-lg hover:shadow-indigo-200; }
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out forwards; }
        .modal.hidden { @apply opacity-0 pointer-events-none; }
        .modal { @apply transition-opacity duration-300; }
        .dashboard-container {
            transition: all 0.5s ease-in-out;
            max-height: 0;
            overflow: hidden;
        }
        .dashboard-container.visible {
            max-height: 5000px; /* Arbitrary large value */
            padding-top: 2rem;
            padding-bottom: 2rem;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.17.0"
  }
}
</script>
</head>
<body class="bg-gradient-to-br from-[var(--background-start)] to-[var(--background-end)]">
<div class="relative flex size-full min-h-screen flex-col" style='font-family: "Spline Sans", "Noto Sans", sans-serif;'>
    <header class="flex items-center justify-between whitespace-nowrap px-6 sm:px-10 py-4 shadow-sm bg-white/60 backdrop-blur-lg sticky top-0 z-10">
        <div class="flex items-center gap-4 text-gray-800">
            <svg class="h-10 w-10 text-[var(--primary-color)]" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20c.75 0 1.48-.05 2.2-.14-5.2-3.21-8.85-8.8-8.85-15.36s3.65-12.15 8.85-15.36C25.48 4.05 24.75 4 24 4zm18.15 11.5c-4.14-3.3-9.56-5.35-15.35-5.35-1.57 0-3.1.18-4.58.51 5.31 3.51 8.9 9.38 8.9 15.84s-3.59 12.33-8.9 15.84c1.48.33 3.01.51 4.58.51 5.79 0 11.21-2.05 15.35-5.35C45.23 33.32 44 28.84 44 24c0-4.84-1.23-9.32-3.85-12.5z" fill="currentColor"></path>
            </svg>
            <h1 class="text-gray-800 text-xl font-bold leading-tight tracking-[-0.015em]">AI Terapi Simülasyonu</h1>
        </div>
        <div class="flex items-center gap-4">
            <div id="user-info" class="hidden items-center gap-2 text-gray-600"></div>
            <div id="logout-button-container"></div>
        </div>
    </header>

    <main id="main-content-container" class="flex flex-1 flex-col items-center p-4 sm:p-6">
        <!-- Login Container -->
        <div id="login-container" class="w-full max-w-lg mx-auto text-center">
             <div id="login-selection" class="flex gap-4 p-1 bg-indigo-100 rounded-xl">
                <button data-action="show-login-form" data-form="student" class="login-tab-button active w-full p-3 font-semibold text-lg rounded-lg">Öğrenci Girişi</button>
                <button data-action="show-login-form" data-form="teacher" class="login-tab-button w-full p-3 font-semibold text-lg rounded-lg">Öğretmen Girişi</button>
            </div>

            <div id="login-forms-container" class="mt-6 bg-white/50 backdrop-blur-lg p-8 rounded-2xl shadow-xl">
                 <!-- Student Login Form -->
                <div id="student-login-form">
                    <div id="student-login-view">
                         <h2 class="text-gray-900 tracking-tight text-3xl font-bold text-center">Öğrenci Girişi</h2>
                         <p class="text-center text-gray-600 mt-2">Lütfen bilgilerinizi girin.</p>
                         <div id="student-login-message" class="mt-4 text-sm"></div>
                         <div class="mt-6 space-y-4">
                             <input type="text" id="username-input" placeholder="Kullanıcı Adı" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg p-3">
                             <input type="password" id="password-input" placeholder="Şifre" class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg p-3">
                             <button data-action="login" class="w-full flex items-center justify-center rounded-lg h-14 px-8 bg-[var(--primary-color)] text-white font-semibold hover:bg-indigo-700 transition-all text-lg shadow-lg">Giriş Yap</button>
                         </div>
                         <div class="mt-6 text-center text-sm text-gray-600">
                             <a href="#" data-action="show-register-view" class="font-semibold text-[var(--primary-color)] hover:underline">Hesap Oluştur</a>
                         </div>
                    </div>
                    <div id="student-register-view" class="hidden">
                         <h2 class="text-gray-900 tracking-tight text-3xl font-bold text-center">Öğrenci Kaydı</h2>
                         <div id="register-error" class="hidden text-red-600 bg-red-100 p-3 rounded-lg mt-4 text-sm"></div>
                         <div class="mt-6 space-y-4">
                             <input type="text" id="register-username-input" placeholder="Kullanıcı Adı" class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg p-3">
                             <input type="password" id="register-password-input" placeholder="Şifre (en az 6 karakter)" class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg p-3">
                             <input type="password" id="register-confirm-password-input" placeholder="Şifre Tekrar" class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-lg p-3">
                             <button data-action="register" class="w-full flex items-center justify-center rounded-lg h-14 px-8 bg-teal-500 text-white font-semibold hover:bg-teal-600 transition-all text-lg shadow-lg">Kayıt Ol</button>
                         </div>
                         <p class="text-center text-sm text-gray-600 mt-6">Zaten bir hesabın var mı? <a href="#" data-action="show-login-view" class="font-semibold text-[var(--primary-color)] hover:underline">Giriş Yap</a></p>
                    </div>
                </div>

                <!-- Teacher Login Form (Initially Hidden) -->
                <div id="teacher-login-form" class="hidden">
                    <h2 class="text-gray-900 tracking-tight text-3xl font-bold text-center">Öğretmen Girişi</h2>
                    <div id="teacher-login-error" class="hidden text-red-600 bg-red-100 p-3 rounded-lg mt-4 text-sm"></div>
                    <div class="mt-6 space-y-4">
                        <input type="password" id="teacher-password-input" placeholder="Yönetici Şifresi" class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-amber-500 focus:ring-amber-500 text-lg p-3">
                        <button data-action="teacher-login" class="w-full flex items-center justify-center rounded-lg h-14 px-8 bg-amber-500 text-white font-semibold hover:bg-amber-600 transition-all text-lg shadow-lg">Giriş Yap</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Container (Initially Hidden) -->
        <div id="dashboard-container" class="dashboard-container w-full">
            <!-- This will be populated dynamically -->
        </div>
    </main>
</div>

<!-- Modals -->
<div id="rationale-modal" class="modal hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-xl max-w-lg w-full relative p-6 animate-fade-in-up">
        <button data-action="close-modal" data-modal="rationale" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition-colors">
            <span class="material-symbols-outlined">close</span>
        </button>
        <div class="flex items-center gap-3 mb-4">
            <span class="material-symbols-outlined text-3xl text-indigo-500">lightbulb</span>
            <h3 id="modal-title" class="text-xl font-bold text-gray-800">Terapötik Gerekçe</h3>
        </div>
        <div id="modal-content" class="text-gray-600 prose max-w-none"></div>
    </div>
</div>

<div id="ai-summary-modal" class="modal hidden fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-2xl shadow-xl max-w-2xl w-full relative p-6 animate-fade-in-up">
        <button data-action="close-modal" data-modal="summary" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 transition-colors">
            <span class="material-symbols-outlined">close</span>
        </button>
        <div class="flex items-center gap-3 mb-4">
            <span class="material-symbols-outlined text-3xl text-[var(--teacher-color)]">auto_awesome</span>
            <h3 id="summary-modal-title" class="text-xl font-bold text-gray-800">AI Performans Özeti</h3>
        </div>
        <div id="summary-modal-content" class="text-gray-600 prose max-w-none h-96 overflow-y-auto"></div>
    </div>
</div>

<div id="notification-container" class="fixed bottom-5 right-5 z-50 flex flex-col gap-2"></div>

<!-- Full Screen Overlays -->
<div id="loading-overlay" class="hidden fixed inset-0 bg-white/80 backdrop-blur-sm z-[100] flex flex-col items-center justify-center p-4 text-gray-800">
    <div class="inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] text-[var(--primary-color)] motion-reduce:animate-[spin_1.5s_linear_infinite]" role="status"></div>
    <p class="mt-4 text-lg font-semibold">Yükleniyor...</p>
</div>

<div id="config-warning-overlay" class="hidden fixed inset-0 bg-black/80 backdrop-blur-sm z-[100] flex items-center justify-center p-4 text-white">
    <div class="bg-red-900 border-4 border-red-600 rounded-2xl shadow-xl max-w-2xl w-full p-8 text-center ring-4 ring-red-500/50">
        <span class="material-symbols-outlined text-7xl text-yellow-300">warning</span>
        <h2 class="text-4xl font-bold mt-4">Yapılandırma Gerekli!</h2>
        <p class="mt-4 text-lg text-red-100">
            Uygulamanın çalışabilmesi için Firebase proje bilgilerinizi girmeniz gerekmektedir.
        </p>
        <p class="mt-2 text-red-200">
            Lütfen <strong>firebase.ts</strong> dosyasını açın ve içerisindeki yer tutucu bilgileri kendi Firebase projenizin bilgileri ile değiştirin.
        </p>
        <div class="mt-6 p-4 bg-black/50 rounded-lg text-left font-mono text-sm text-yellow-200 overflow-x-auto">
            <pre class="whitespace-pre-wrap"><code>// firebase.ts

export const firebaseConfig = {
  apiKey: "AIzaSyBMOhPCumWJncjfch4GhdPEnwO03c_8o5E",
  authDomain: "cbt-sim-projesi.firebaseapp.com",
  projectId: "cbt-sim-projesi",
  storageBucket: "cbt-sim-projesi.firebasestorage.app",
  messagingSenderId: "869396190469",
  appId: "1:869396190469:web:c6db6adefbd2c17e86d36c",
  measurementId: "G-9S9PYC74LR"
};</code></pre>
        </div>
        <p class="mt-6 text-sm text-red-300">
            Bu bilgileri Firebase Console &gt; Proje Ayarları &gt; Genel sekmesinden bulabilirsiniz. Değişikliği yaptıktan sonra sayfayı yenileyin.
        </p>
    </div>
</div>

<script>
    // Simple script to handle login form toggling
    document.addEventListener('DOMContentLoaded', () => {
        const studentButton = document.querySelector('[data-action="show-login-form"][data-form="student"]');
        const teacherButton = document.querySelector('[data-action="show-login-form"][data-form="teacher"]');
        const studentForm = document.getElementById('student-login-form');
        const teacherForm = document.getElementById('teacher-login-form');

        studentButton.addEventListener('click', () => {
            teacherForm.classList.add('hidden');
            studentForm.classList.remove('hidden');
            teacherButton.classList.remove('active');
            studentButton.classList.add('active');
        });

        teacherButton.addEventListener('click', () => {
            studentForm.classList.add('hidden');
            teacherForm.classList.remove('hidden');
            studentButton.classList.remove('active');
            teacherButton.classList.add('active');
        });

        // Style for active tab
        const style = document.createElement('style');
        style.innerHTML = `
            .login-tab-button.active {
                background-color: white;
                color: var(--primary-color);
                box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            }
        `;
        document.head.appendChild(style);
    });
</script>
<script type="module" src="index.tsx"></script>
</body></html>
